<script type="text/javascript">
	function maakDatatable(){
		$.ajax({
			type: "GET",
			url: './rest/gebruiker/isIngelogd',
			dataType:'json',
			success: function (data) {
				if(new String(data) == "false"){
					document.location.hash='#inloggen';
				}else{
                  $.ajax({  
                       type: "GET",  
                       url: './rest/gebruiker/lijstRelaties',
                       dataType: "json",  
                       context: this,  
                       success: function(response) {
	               			ko.applyBindings(new LijstRelatie(response));
                    	   console.log(response);
                    	   $.each(response, function(i, item) {
                    		   console.log(item);
                    		   console.log(item.voornaam);
                    		});
                       }
				});
			}
				}
		});
	 };
	 
	function LijstRelatie(data){
		var self = this;
		
		self.lijst = ko.observableArray();
		$.each(data.jsonRelaties, function(i, item) {
			self.lijst.push(new Relatie(item));
		});
		
		self.naarDetailScherm = function(relatie){
			console.log("1");
			document.location.hash='#beherenRelatie/' + ko.utils.unwrapObservable(relatie.id);
		}
	}
	 
	function Relatie(data) {
		var self = this;
		
		self.id = ko.observable(data.id);
		self.voornaam = ko.observable(data.voornaam);
		self.tussenvoegsel = ko.observable(data.tussenvoegsel);
		self.achternaam = ko.observable(data.achternaam);
		self.geboortedatum = ko.observable(data.geboorteDatumOpgemaakt);
		self.adres = ko.observable(data.adresOpgemaakt);

		self.naarDetailScherm = function(relatie){
			console.log("2");
			document.location.hash='#beherenRelatie/' + ko.utils.unwrapObservable(relatie.id);
		}
	}

</script>
	
<a href="#" onclick="reset();"><img src="images/add.png" alt="Toevoegen Relatie" /></a>
<!--input type="text" id="zoekCriteriaLijstRelaties" onkeyup="maakDatatable();" /-->

<table class="table">
	<tr>
		<th>Voornaam</th>
		<th>Tussenvoegsel</th>
		<th>Achternaam</th>
		<th>Geboortedatum</th>
		<th>Adres</th>
	</tr>
	<tbody data-bind="foreach: lijst">
		<tr>
			<td data-bind="text : voornaam, click: naarDetailScherm"></td>
			<td data-bind="text : tussenvoegsel, click: naarDetailScherm"></td>
			<td data-bind="text : achternaam, click: naarDetailScherm"></td>
			<td data-bind="text : geboortedatum, click: naarDetailScherm"></td>
			<td data-bind="text : adres, click: naarDetailScherm"></td>
		</tr>
	</tbody>
</table>
	